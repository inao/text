# 自動検出・修正パターン

Cursorが自動チェックするための正規表現パターンと修正提案テンプレートです。

## エラー・警告・情報レベル分類

### エラーレベル（必須修正）
- 見出しの連続
- 指示代名詞の多用
- 読解力が必要な見出し構成
- 不適切なカギカッコ使用

### 警告レベル（推奨修正）
- 冗長表現の使用
- 不適切な見出し命名
- 不適切な約物使用
- 種別不明な固有名詞
- 法人表記の不統一

### 情報レベル（参考）
- 表記の不統一
- 数字表記の不統一
- バッククォート記号の使用

## 見出し構造パターン

| パターン | 正規表現 | レベル | 修正内容 |
|---------|---------|--------|----------|
| 見出し連続 | `^#{1,6}\s+.*\n^#{1,6}\s+.*` | エラー | 本文挿入 |
| 「◯◯について」 | `^#{1,6}\s+.*について$` | 警告 | 説明的見出しに変更 |
| 「AとB」 | `^#{1,6}\s+.*と.*$` | 警告 | 説明的見出しに変更 |
| 単独固有名詞 | `^#{1,6}\s+[A-Za-z]+$` | 警告 | 説明的見出しに変更 |
| 番号付き見出し | `^#{1,6}\s+.*[0-9]+：.*$` | エラー | 階層構造に変更 |

## 文章構成パターン

| パターン | 正規表現 | レベル | 修正内容 |
|---------|---------|--------|----------|
| 冗長表現 | `しま[いうっ]|よう[なに]|とい[うっ]|てみ[たてる]|こと[^。]*こと|非常に|とても|たいへん|大変` | 警告 | 簡潔な表現に変更 |
| 指示代名詞 | `(これ|それ|あれ|どれ)[はがをに]` | エラー | 具体的な表現に変更 |
| 種別不明固有名詞 | `` `([a-zA-Z0-9_]+)`(?![要素|型|クラス|メソッド|関数|変数|属性|配列|オブジェクト|イベント|ハンドラ|パラメータ|プロパティ|モジュール|名前空間|マクロ|タグ|キー|値|文]) `` | 警告 | 種別を明記 |

## 約物・記号パターン

| パターン | 正規表現 | レベル | 修正内容 |
|---------|---------|--------|----------|
| 不適切カギカッコ | `「[^」]*」(?!と呼びます|と言います|のタイトル)` | エラー | カギカッコ削除 |
| ナカグロ使用 | `[^・]*・[^・]*` | 警告 | カンマまたは空白に変更 |
| 全角スラッシュ連続 | `[^／]*／[^／]*／[^／]*` | 警告 | カンマ区切りに変更 |

## 表記・用語パターン

| パターン | 正規表現 | レベル | 修正内容 |
|---------|---------|--------|----------|
| 法人表記不統一 | `(マイクロソフト|グーグル|アップル|フェイスブック|ツイッター|アマゾン|ネットフリックス|スポティファイ)` | 警告 | 英語表記に統一 |
| 数字表記不統一 | `([0-9]+つ|一つ|二つ|三つ|四つ|五つ|六つ|七つ|八つ|九つ|十つ)` | 情報 | 統一された表記に変更 |

## 修正提案テンプレート

### 見出し構造の場合
```
**検出**: [パターン名]
**修正前**: [実際の見出し]
**修正後**: [修正後の見出し]
**理由**: [修正理由]
```

### 文章構成の場合
```
**検出**: [パターン名]
**修正前**: [実際のテキスト]
**修正後**: [修正後のテキスト]
**理由**: [修正理由]
```

### 約物・記号の場合
```
**検出**: [パターン名]
**修正前**: [実際のテキスト]
**修正後**: [修正後のテキスト]
**理由**: [約物の使用基準に従って修正]
```

### 表記・用語の場合
```
**検出**: [パターン名]
**修正前**: [実際のテキスト]
**修正後**: [修正後のテキスト]
**理由**: [表記統一の基準に従って修正]
```

## 検出優先度

### 高優先度（執筆中）
1. 見出しの連続
2. 指示代名詞の多用
3. 冗長表現の使用

### 中優先度（推敲時）
1. 不適切な見出し命名
2. 不適切な約物使用
3. 種別不明な固有名詞

### 低優先度（最終確認時）
1. 表記の不統一
2. 法人表記の不統一
3. 数字表記の不統一

## テスト結果（サンプルファイル）

### 冗長表現の検出例
```
example_document_01.md: 演算として不正な値が渡されてしまい
example_document_01.md: 失われてしまうため
example_document_02.md: このようなプロトコルが存在している
```

### 指示代名詞の検出例
```
example_document_02.md: これをプロトコルエクステンションと言います
example_document_01.md: これを型エイリアスと言います
example_document_01.md: それはすべての型がAny型へアップキャスト可能である
```

### 見出し構造の検出例
```
example_document_01.md: ## 数値型との相互変換
example_document_01.md: ## map(_:)メソッドとflatMap(_:)メソッド
```

## 使用ガイド

### 1. 自動検出の実行
```bash
# 全パターンの検出
grep -rE "パターン" .

# 特定レベルの検出
grep -rE "エラーパターン" .
```

### 2. 修正提案の生成
- 検出されたパターンに基づいて修正提案を生成
- エラーレベルに応じた優先度で表示
- 具体的な修正例を提示

### 3. 継続改善
- 新しいパターンの追加
- 既存パターンの改良
- サンプルファイルでの動作確認

## 更新履歴

- 2024-01-XX: 初版作成
- 見出し構造パターンの追加
- 文章構成パターンの追加
- 約物・記号パターンの追加
- 表記・用語パターンの追加
- サンプルファイルでのテスト結果を追加 